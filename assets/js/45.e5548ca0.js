(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{490:function(e,a,s){"use strict";s.r(a);var t=s(40),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"quick-start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quick-start"}},[e._v("#")]),e._v(" Quick Start")]),e._v(" "),s("p",[e._v("AWS에 생성한 Resource 및 필요한 초기 설정 정리한 내역임")]),e._v(" "),s("h2",{attrs:{id:"aws-configure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-configure"}},[e._v("#")]),e._v(" AWS Configure")]),e._v(" "),s("h3",{attrs:{id:"prerequisite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisite"}},[e._v("#")]),e._v(" Prerequisite")]),e._v(" "),s("ul",[s("li",[e._v("aws-cli 설치")]),e._v(" "),s("li",[e._v("AWS Access Key 생성")]),e._v(" "),s("li",[e._v("기본 Region은 Seoul (ap-northeast-2)")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("aws configure --profile <username>\nAWS Access Key ID [None]: <user key id>\nAWS Secret Access Key [None]: <user access key>\nDefault region name [None]: ap-northeast-2\nDefault output format [None]: json\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("h2",{attrs:{id:"create-kubeconfig"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-kubeconfig"}},[e._v("#")]),e._v(" Create kubeconfig")]),e._v(" "),s("ul",[s("li",[e._v("kubeconfig 생성 후, kube-system aws-auth configmap에 mapUser 추가 필요")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("aws eks update-kubeconfig \\\n  --region ap-northeast-2 \\\n  --name <cluster name> \\\n  --profile <username>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("h2",{attrs:{id:"troubleshooting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),s("h3",{attrs:{id:"docker-image-cache-관리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-cache-관리"}},[e._v("#")]),e._v(" Docker Image Cache 관리")]),e._v(" "),s("ul",[s("li",[e._v("지정된 디스크 사용량 비율로 Image Cache 정리하도록 구성하는 Guide"),s("br"),e._v(" "),s("a",{attrs:{href:"https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-worker-nodes-image-cache/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-worker-nodes-image-cache/"),s("OutboundLink")],1)])]),e._v(" "),s("h3",{attrs:{id:"docker-gc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-gc"}},[e._v("#")]),e._v(" Docker GC")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("docker run --rm --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /etc:/etc:ro spotify/docker-gc\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/spotify/docker-gc",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/spotify/docker-gc"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"evicted-pod-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#evicted-pod-삭제"}},[e._v("#")]),e._v(" Evicted Pod 삭제")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("kubectl get po -A "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" Evicted "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v('" " '),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$2")]),e._v("}'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("xargs")]),e._v(" kubectl delete po -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("namespace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);