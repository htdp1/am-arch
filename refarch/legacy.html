<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Legacy Interface 개발 | HTDP1</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="htdp1 github pages">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/am-arch/assets/css/0.styles.cf1d3b34.css" as="style"><link rel="preload" href="/am-arch/assets/js/app.2221c747.js" as="script"><link rel="preload" href="/am-arch/assets/js/2.ae01a4e5.js" as="script"><link rel="preload" href="/am-arch/assets/js/66.0dae820b.js" as="script"><link rel="prefetch" href="/am-arch/assets/js/10.1315714d.js"><link rel="prefetch" href="/am-arch/assets/js/11.eb0f8968.js"><link rel="prefetch" href="/am-arch/assets/js/12.4ffcb465.js"><link rel="prefetch" href="/am-arch/assets/js/13.4e131fd6.js"><link rel="prefetch" href="/am-arch/assets/js/14.52fcb18c.js"><link rel="prefetch" href="/am-arch/assets/js/15.badf86bc.js"><link rel="prefetch" href="/am-arch/assets/js/16.83fc20df.js"><link rel="prefetch" href="/am-arch/assets/js/17.c9a2eb8f.js"><link rel="prefetch" href="/am-arch/assets/js/18.c07482c1.js"><link rel="prefetch" href="/am-arch/assets/js/19.14816741.js"><link rel="prefetch" href="/am-arch/assets/js/20.939225d0.js"><link rel="prefetch" href="/am-arch/assets/js/21.ad046089.js"><link rel="prefetch" href="/am-arch/assets/js/22.8cb89629.js"><link rel="prefetch" href="/am-arch/assets/js/23.897f3848.js"><link rel="prefetch" href="/am-arch/assets/js/24.283503ef.js"><link rel="prefetch" href="/am-arch/assets/js/25.f7870632.js"><link rel="prefetch" href="/am-arch/assets/js/26.7781dcb0.js"><link rel="prefetch" href="/am-arch/assets/js/27.cb94e13f.js"><link rel="prefetch" href="/am-arch/assets/js/28.784faa22.js"><link rel="prefetch" href="/am-arch/assets/js/29.f36164c0.js"><link rel="prefetch" href="/am-arch/assets/js/3.8dcb48b6.js"><link rel="prefetch" href="/am-arch/assets/js/30.fe1e9b60.js"><link rel="prefetch" href="/am-arch/assets/js/31.c04d80c5.js"><link rel="prefetch" href="/am-arch/assets/js/32.5caab91e.js"><link rel="prefetch" href="/am-arch/assets/js/33.f3197a56.js"><link rel="prefetch" href="/am-arch/assets/js/34.1fb31e2a.js"><link rel="prefetch" href="/am-arch/assets/js/35.29e5a944.js"><link rel="prefetch" href="/am-arch/assets/js/36.45ec308c.js"><link rel="prefetch" href="/am-arch/assets/js/37.3a577fd9.js"><link rel="prefetch" href="/am-arch/assets/js/38.df60b233.js"><link rel="prefetch" href="/am-arch/assets/js/39.d8277d56.js"><link rel="prefetch" href="/am-arch/assets/js/4.b2603cd1.js"><link rel="prefetch" href="/am-arch/assets/js/40.510f500b.js"><link rel="prefetch" href="/am-arch/assets/js/41.32220274.js"><link rel="prefetch" href="/am-arch/assets/js/42.3bc41ab3.js"><link rel="prefetch" href="/am-arch/assets/js/43.1a508afa.js"><link rel="prefetch" href="/am-arch/assets/js/44.013a31df.js"><link rel="prefetch" href="/am-arch/assets/js/45.1a336b98.js"><link rel="prefetch" href="/am-arch/assets/js/46.a4c2873d.js"><link rel="prefetch" href="/am-arch/assets/js/47.dcb29f6f.js"><link rel="prefetch" href="/am-arch/assets/js/48.0b79a292.js"><link rel="prefetch" href="/am-arch/assets/js/49.50120c2b.js"><link rel="prefetch" href="/am-arch/assets/js/5.e40e4eb9.js"><link rel="prefetch" href="/am-arch/assets/js/50.cbd55382.js"><link rel="prefetch" href="/am-arch/assets/js/51.408c94cc.js"><link rel="prefetch" href="/am-arch/assets/js/52.b6638fb4.js"><link rel="prefetch" href="/am-arch/assets/js/53.1950a4e0.js"><link rel="prefetch" href="/am-arch/assets/js/54.37c84cab.js"><link rel="prefetch" href="/am-arch/assets/js/55.7c1f051e.js"><link rel="prefetch" href="/am-arch/assets/js/56.34b8eb86.js"><link rel="prefetch" href="/am-arch/assets/js/57.5649df3f.js"><link rel="prefetch" href="/am-arch/assets/js/58.d16f6698.js"><link rel="prefetch" href="/am-arch/assets/js/59.c70ab998.js"><link rel="prefetch" href="/am-arch/assets/js/6.7949664e.js"><link rel="prefetch" href="/am-arch/assets/js/60.dd5a3b28.js"><link rel="prefetch" href="/am-arch/assets/js/61.dcc2bb2b.js"><link rel="prefetch" href="/am-arch/assets/js/62.a4e49197.js"><link rel="prefetch" href="/am-arch/assets/js/63.4501f723.js"><link rel="prefetch" href="/am-arch/assets/js/64.6efa6074.js"><link rel="prefetch" href="/am-arch/assets/js/65.1280eb19.js"><link rel="prefetch" href="/am-arch/assets/js/7.a9abf8d3.js"><link rel="prefetch" href="/am-arch/assets/js/8.91ffafe0.js"><link rel="prefetch" href="/am-arch/assets/js/9.a88939cf.js">
    <link rel="stylesheet" href="/am-arch/assets/css/0.styles.cf1d3b34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/am-arch/" class="home-link router-link-active"><!----> <span class="site-name">HTDP1</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/am-arch/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/am-arch/cloud/" class="nav-link">
  Cloud
</a></div><div class="nav-item"><a href="/am-arch/refarch/" class="nav-link router-link-active">
  Ref. Arch.
</a></div><div class="nav-item"><a href="/am-arch/cloud-native-app/" class="nav-link">
  Cloud.Native.App
</a></div><div class="nav-item"><a href="/am-arch/machinelearning/" class="nav-link">
  M / L
</a></div><div class="nav-item"><a href="/am-arch/gitops/" class="nav-link">
  GitOps
</a></div><div class="nav-item"><a href="/am-arch/multi-cloud/" class="nav-link">
  Multi Cloud
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/am-arch/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/am-arch/cloud/" class="nav-link">
  Cloud
</a></div><div class="nav-item"><a href="/am-arch/refarch/" class="nav-link router-link-active">
  Ref. Arch.
</a></div><div class="nav-item"><a href="/am-arch/cloud-native-app/" class="nav-link">
  Cloud.Native.App
</a></div><div class="nav-item"><a href="/am-arch/machinelearning/" class="nav-link">
  M / L
</a></div><div class="nav-item"><a href="/am-arch/gitops/" class="nav-link">
  GitOps
</a></div><div class="nav-item"><a href="/am-arch/multi-cloud/" class="nav-link">
  Multi Cloud
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/" aria-current="page" class="sidebar-link">Overview</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Modern API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/modernapi.html" class="sidebar-link">Modern API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/am-arch/refarch/perftest.html" class="sidebar-link">Redis 성능 측정</a></li><li><a href="/am-arch/refarch/hatest.html" class="sidebar-link">Redis HA with standalone</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>EIP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/camel.html" class="sidebar-link">Apache Camel and EIP</a></li><li><a href="/am-arch/refarch/legacy.html" aria-current="page" class="active sidebar-link">Legacy Interface 개발</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#springboot-와-apache-camel-을-이용한-개발-절차" class="sidebar-link">Springboot 와 Apache Camel 을 이용한 개발 절차</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#springboot-프로젝트-생성" class="sidebar-link">springboot 프로젝트 생성</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#pom-xml-에-필요한-라이브러리-추가" class="sidebar-link">pom.xml 에 필요한 라이브러리 추가</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#camelwebconfig-java-생성" class="sidebar-link">CamelWebConfig.java 생성</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#java-code-를-이용한-개발" class="sidebar-link">java code 를 이용한 개발</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#run-및-test" class="sidebar-link">run 및 test</a></li><li class="sidebar-sub-header"><a href="/am-arch/refarch/legacy.html#java-로-개발된-코드를-xml-로-구성" class="sidebar-link">java 로 개발된 코드를 xml 로 구성</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>KeyCloak</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/keycloak.html" class="sidebar-link">2조 소과제: Keycloak</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Harbor</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/am-arch/refarch/harbor.html" class="sidebar-link">3조 소과제: Harbor</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="legacy-interface-개발"><a href="#legacy-interface-개발" class="header-anchor">#</a> Legacy Interface 개발</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>대부분의 데이터를 Legacy system 이 갖고 있는 데이터를 조회하기를 원합니다. 보통 Legacy data 를 Database 연계를 통해서 내부 시스템으로 Data 를 복제하여 사용하거나 Legacy system 의 open api 가 제공된다면 권한을 획득하여 open api 를 활용하여 직접 데이터를 조회할 수 있습니다.</p> <p>Legacy system 의 open api 를 활용하여 개발할 경우 대부분의 개발은 target api 를 정의하고 target api 에서 필요로 하는 payload 를 생성하고 target api 를 호출해서 api 에서 return 하는 object 를 ui 에서 필요한 json 객체로 변환하여 리턴하는 역할을 하게 됩니다.</p> <p>이 내용은 거의 모든 개발에 공통으로 적용되며 간단히 정리하면 아래와 같습니다.</p> <ul><li>target api 정의</li> <li>payload 생성</li> <li>target api 호출</li> <li>translate object to json</li> <li>return json</li></ul> <p>이러한 공통적인 기능을 Apache Camel 의 domain-specific languages 를 통해서 XML 선언만으로도 구현이 가능하며, 필요하다면 java 코드(beans)로 여러가지 기능을 확장할 수 있습니다.</p> <h2 id="springboot-와-apache-camel-을-이용한-개발-절차"><a href="#springboot-와-apache-camel-을-이용한-개발-절차" class="header-anchor">#</a> Springboot 와 Apache Camel 을 이용한 개발 절차</h2> <p>Apcahe Camel 은 Springboot 을 위해 별도의 라이브러리를 제공할 정도로 친화적입니다. Apache Camel 만으로도 충분히 개발이 가능하지만 개발에 익숙한 springboot 를 이용하여 개발하는 과정을 설명합니다.</p> <h3 id="springboot-프로젝트-생성"><a href="#springboot-프로젝트-생성" class="header-anchor">#</a> springboot 프로젝트 생성</h3> <ul><li>vs code 에 Spring Boot Extension Pack 을 install 합니다.</li> <li>vs code &gt; View &gt; Command Palette 메뉴를 선택합니다.</li> <li>입력창에 spring 을 입력한 후 Spring Initializer : Create a Maven Project 를 선택합니다.</li> <li>이후 단계별 wizard 를 통해 springboot project 를 생성합니다.</li></ul> <h3 id="pom-xml-에-필요한-라이브러리-추가"><a href="#pom-xml-에-필요한-라이브러리-추가" class="header-anchor">#</a> pom.xml 에 필요한 라이브러리 추가</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.camel.springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>camel-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.camel.springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>camel-http-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.camel.springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>camel-rest-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.camel.springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>camel-jackson-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="camelwebconfig-java-생성"><a href="#camelwebconfig-java-생성" class="header-anchor">#</a> CamelWebConfig.java 생성</h3> <p>Camel Rest 를 사용하여 Rest API 를 제공하려면 ServletRegistrationBean 를 Bean 으로 생성해야 합니다.<br>
CamelWebConfig 클래스는 위 작업을 수행합니다.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CamelWebConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CAMEL_URL_MAPPING <span class="token operator">=</span> <span class="token string">&quot;/camel/*&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CAMEL_SERVLET_NAME <span class="token operator">=</span> <span class="token string">&quot;CamelServlet&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CamelHttpTransportServlet</span><span class="token punctuation">&gt;</span></span> <span class="token function">servletRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">CamelHttpTransportServlet</span> camelHttpTransportServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CamelHttpTransportServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        camelHttpTransportServlet<span class="token punctuation">.</span><span class="token function">setAsync</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CamelHttpTransportServlet</span><span class="token punctuation">&gt;</span></span> registration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
                camelHttpTransportServlet<span class="token punctuation">,</span> CAMEL_URL_MAPPING<span class="token punctuation">)</span><span class="token punctuation">;</span>
        registration<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>CAMEL_SERVLET_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> registration<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="java-code-를-이용한-개발"><a href="#java-code-를-이용한-개발" class="header-anchor">#</a> java code 를 이용한 개발</h3> <p>아래 java class 를 생성합니다.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestRoute</span> <span class="token keyword">extends</span> <span class="token class-name">RouteBuilder</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token function">restConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindingMode</span><span class="token punctuation">(</span><span class="token class-name">RestBindingMode</span><span class="token punctuation">.</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// rest api 를 정의합니다.</span>
	<span class="token function">rest</span><span class="token punctuation">(</span><span class="token string">&quot;/sample&quot;</span><span class="token punctuation">)</span>
	    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
	    <span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token string">&quot;direct:get_sample&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
	    <span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token string">&quot;direct:post_sample&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">;</span>

	<span class="token comment">// get 에 대한 다른 rest api 로 routing 처리합니다.</span>
	<span class="token comment">// api 는 별도로 개발이 필요합니다.</span>
	<span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;direct:get_sample&quot;</span><span class="token punctuation">)</span>
	    <span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token string">&quot;rest:get:?host=localhost:8090/sample/&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">;</span>

	<span class="token comment">// post 에 대한 다른 rest api 로 routing 처리합니다.</span>
	<span class="token comment">// api 는 별도로 개발이 필요합니다.</span>
	<span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;direct:post_sample&quot;</span><span class="token punctuation">)</span>
	    <span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token string">&quot;rest:post:?host=localhost:8090/sample/&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="run-및-test"><a href="#run-및-test" class="header-anchor">#</a> run 및 test</h3> <ul><li>springboot 를 실행하고 아래 url 에 접속하여 return 을 확인합니다.
<blockquote><p>curl -X GET http://localhost:8080/sample/<br>
curl -X POST http://localhost:8080/sample/ -d &quot;{}&quot;</p></blockquote></li></ul> <h3 id="java-로-개발된-코드를-xml-로-구성"><a href="#java-로-개발된-코드를-xml-로-구성" class="header-anchor">#</a> java 로 개발된 코드를 xml 로 구성</h3> <ul><li>resources 폴더에 아래 파일을 생성합니다.</li> <li>SpringRouteContext.xml<div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://camel.apache.org/schema/spring
        http://camel.apache.org/schema/spring/camel-spring.xsd <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>camelContext</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://camel.apache.org/schema/spring<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rests</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rest</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/sample<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>get</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>direct:get_sample<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>get</span><span class="token punctuation">&gt;</span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>post</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>direct:post_sample<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>post</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rest</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rests</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>routes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>route</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>direct:get_sample<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rest:get:?host=localhost:8090/sample/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>route</span><span class="token punctuation">&gt;</span></span>
            
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>route</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>direct:post_sample<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rest:post:?host=localhost:8090/sample/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>route</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>routes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>camelContext</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/am-arch/refarch/camel.html" class="prev">
        Apache Camel and EIP
      </a></span> <span class="next"><a href="/am-arch/refarch/keycloak.html">
        2조 소과제: Keycloak
      </a>
      →
    </span></p></div> </main></div></div><div class="global-ui"></div></div>
    <script src="/am-arch/assets/js/app.2221c747.js" defer></script><script src="/am-arch/assets/js/2.ae01a4e5.js" defer></script><script src="/am-arch/assets/js/66.0dae820b.js" defer></script>
  </body>
</html>
